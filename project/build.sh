#!/bin/sh
# Self-extracting archive-and-build script

set -e

OUTDIR=/tmp/build
ARCHIVE_NAME="archive.tar.gz"

echo "[-] cd-ing to $OUTDIR"
cd $OUTDIR

# Decode and extract the embedded archive
sed '1,/^__ARCHIVE_BELOW__/d' "$0" | base64 -d > "$OUTDIR/$ARCHIVE_NAME"
tar -xzf "$OUTDIR/$ARCHIVE_NAME" -C "$OUTDIR"
rm "$OUTDIR/$ARCHIVE_NAME"

echo "[-] building and testing"
set -x
make SHELL="bash -x" clean \
    install-dependencies \
    all \
    test
set +x


exit 0

__ARCHIVE_BELOW__
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
dwB4AAA=
